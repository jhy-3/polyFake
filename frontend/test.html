<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PolySleuth è¿æ¥æµ‹è¯•</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a2e;
            color: #eee;
        }
        .test-item {
            margin: 10px 0;
            padding: 10px;
            background: #16213e;
            border-left: 3px solid #0f3460;
        }
        .success { border-color: #0f0; }
        .error { border-color: #f00; }
        .loading { color: #888; }
        pre {
            background: #000;
            padding: 10px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ” PolySleuth è¿æ¥æµ‹è¯•</h1>
    
    <div class="test-item loading" id="test-html">
        <strong>1. HTML åŠ è½½</strong>
        <div id="result-html">æµ‹è¯•ä¸­...</div>
    </div>
    
    <div class="test-item loading" id="test-css">
        <strong>2. CSS åŠ è½½</strong>
        <div id="result-css">æµ‹è¯•ä¸­...</div>
    </div>
    
    <div class="test-item loading" id="test-js">
        <strong>3. JS åŠ è½½</strong>
        <div id="result-js">æµ‹è¯•ä¸­...</div>
    </div>
    
    <div class="test-item loading" id="test-api">
        <strong>4. API è¿æ¥</strong>
        <div id="result-api">æµ‹è¯•ä¸­...</div>
    </div>
    
    <div class="test-item loading" id="test-fonts">
        <strong>5. å¤–éƒ¨èµ„æº (Google Fonts)</strong>
        <div id="result-fonts">æµ‹è¯•ä¸­...</div>
    </div>
    
    <div class="test-item loading" id="test-plotly">
        <strong>6. Plotly CDN</strong>
        <div id="result-plotly">æµ‹è¯•ä¸­...</div>
    </div>
    
    <script>
        async function runTests() {
            // Test 1: HTML
            document.getElementById('test-html').className = 'test-item success';
            document.getElementById('result-html').textContent = 'âœ… HTML å·²åŠ è½½';
            
            // Test 2: CSS
            const cssTest = document.createElement('link');
            cssTest.rel = 'stylesheet';
            cssTest.href = '/static/styles.css';
            cssTest.onload = () => {
                document.getElementById('test-css').className = 'test-item success';
                document.getElementById('result-css').textContent = 'âœ… CSS åŠ è½½æˆåŠŸ';
            };
            cssTest.onerror = () => {
                document.getElementById('test-css').className = 'test-item error';
                document.getElementById('result-css').textContent = 'âŒ CSS åŠ è½½å¤±è´¥';
            };
            document.head.appendChild(cssTest);
            
            // Test 3: JS
            const jsTest = document.createElement('script');
            jsTest.src = '/static/app.js';
            jsTest.onload = () => {
                document.getElementById('test-js').className = 'test-item success';
                document.getElementById('result-js').textContent = 'âœ… JS åŠ è½½æˆåŠŸ';
            };
            jsTest.onerror = () => {
                document.getElementById('test-js').className = 'test-item error';
                document.getElementById('result-js').textContent = 'âŒ JS åŠ è½½å¤±è´¥';
            };
            document.head.appendChild(jsTest);
            
            // Test 4: API
            try {
                const response = await fetch('/api/system/stats');
                const data = await response.json();
                document.getElementById('test-api').className = 'test-item success';
                document.getElementById('result-api').innerHTML = `âœ… API æ­£å¸¸<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('test-api').className = 'test-item error';
                document.getElementById('result-api').textContent = `âŒ API é”™è¯¯: ${error.message}`;
            }
            
            // Test 5: Google Fonts
            const fontsTest = document.createElement('link');
            fontsTest.rel = 'stylesheet';
            fontsTest.href = 'https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap';
            fontsTest.onload = () => {
                document.getElementById('test-fonts').className = 'test-item success';
                document.getElementById('result-fonts').textContent = 'âœ… Google Fonts åŠ è½½æˆåŠŸ';
            };
            fontsTest.onerror = () => {
                document.getElementById('test-fonts').className = 'test-item error';
                document.getElementById('result-fonts').textContent = 'âŒ Google Fonts åŠ è½½å¤±è´¥ï¼ˆå¯èƒ½è¢«å¢™ï¼‰';
            };
            document.head.appendChild(fontsTest);
            
            // Test 6: Plotly
            const plotlyTest = document.createElement('script');
            plotlyTest.src = 'https://cdn.plot.ly/plotly-2.27.0.min.js';
            plotlyTest.onload = () => {
                document.getElementById('test-plotly').className = 'test-item success';
                document.getElementById('result-plotly').textContent = 'âœ… Plotly CDN åŠ è½½æˆåŠŸ';
            };
            plotlyTest.onerror = () => {
                document.getElementById('test-plotly').className = 'test-item error';
                document.getElementById('result-plotly').textContent = 'âŒ Plotly CDN åŠ è½½å¤±è´¥';
            };
            document.head.appendChild(plotlyTest);
        }
        
        runTests();
    </script>
</body>
</html>
